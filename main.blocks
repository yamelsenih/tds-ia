<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="mUNlv!YGqdVmp-KSipfL">accelerationX</variable><variable id="%khZWY;pyw]{EV#2gK1S">accelerationY</variable><variable id="uH,,v%=f/A:4)in/C8[F">accelerationZ</variable><variable id="5CPiMfpN[|?srM+(/+(:">jsonData</variable></variables><block type="pxt-on-start" id="Ep;Jx3aJ~8ycW$i,%Y|(" x="20" y="20"><statement name="HANDLER"><block type="variables_set" id="H/m-uqg={1]lg?hS/hy="><field name="VAR" id="5CPiMfpN[|?srM+(/+(:">jsonData</field><value name="VALUE"><shadow type="math_number" id=")s76M0|7u:#L68$QpV*Z"><field name="NUM">0</field></shadow><block type="text" id="-#Sqn3h{:5i5HK]xnU7J"><field name="TEXT"></field></block></value><next><block type="bluetooth_start_uart_service" id="=M[LQ%7@i|3HYnSlOUWT"><comment pinned="false" h="80" w="160">Habilita el servicio de UART</comment></block></next></block></statement></block><block type="bluetooth_on_connected" id="#f@9dZ_ZJEJR04s9~ZlN" x="317" y="20"><comment pinned="false" h="80" w="160">Configuración Bluetooth al iniciar</comment><statement name="HANDLER"><block type="basic_show_icon" id="{3YFrMGdr{Rfr!=l%=X$"><field name="i">IconNames.Yes</field><comment pinned="false" h="80" w="160">Muestra "sí" cuando está conectado</comment></block></statement></block><block type="bluetooth_on_disconnected" id="2E|_?[gcTUR=Z,*a-^Gr" x="579" y="20"><statement name="HANDLER"><block type="basic_show_icon" id="by!V]C_8%7lP}Lz8+w)*"><field name="i">IconNames.No</field><comment pinned="false" h="80" w="160">Muestra "no" cuando está desconectado</comment></block></statement></block><block type="device_forever" id="9-C$8lIOVJmTqj*!wJ(Z" x="840" y="20"><comment pinned="false" h="80" w="160">Configuración al iniciar</comment><statement name="HANDLER"><block type="variables_set" id="3DR0(H=):(O9/#.)m0:-"><field name="VAR" id="mUNlv!YGqdVmp-KSipfL">accelerationX</field><comment pinned="false" h="80" w="160">Lee los datos del acelerómetro</comment><value name="VALUE"><shadow type="math_number" id="af=;xfW_m@ccC=Qmpvdk"><field name="NUM">0</field></shadow><block type="device_acceleration" id="3;89)lW[gr/9N*NG(fXD"><field name="NAME">Dimension.X</field></block></value><next><block type="variables_set" id="1fOH_%Nab2L*PRZ%)=j{"><field name="VAR" id="%khZWY;pyw]{EV#2gK1S">accelerationY</field><value name="VALUE"><shadow type="math_number" id="Ob6gm4H=7#z=/OGq:Bzm"><field name="NUM">0</field></shadow><block type="device_acceleration" id=";(n;yZrm@_DnUx=d^Apf"><field name="NAME">Dimension.Y</field></block></value><next><block type="variables_set" id="2^%dl#CVx6CX;_xcS_AZ"><field name="VAR" id="uH,,v%=f/A:4)in/C8[F">accelerationZ</field><value name="VALUE"><shadow type="math_number" id="3~@GWT|nh$oXZJhrcNvR"><field name="NUM">0</field></shadow><block type="device_acceleration" id="D!(E|Kyq,8{%Of6eqhC3"><field name="NAME">Dimension.Z</field></block></value><next><block type="controls_if" id="1pdzzmsrdr1i6kZEIG/d"><mutation else="1"></mutation><comment pinned="false" h="80" w="160">Muestra una cara feliz si se agita el micro:bit (opcional, para depuración)</comment><value name="IF0"><shadow type="logic_boolean" id=".%-P8SK.qmap[n22?2k{"><field name="BOOL">TRUE</field></shadow><block type="deviceisgesture" id="va_Xh?O?E0`keqE6*DpC"><field name="gesture">Gesture.Shake</field></block></value><statement name="DO0"><block type="basic_show_icon" id="L,nzJ`+c.rJbApYVwx1x"><field name="i">IconNames.Happy</field></block></statement><statement name="ELSE"><block type="device_clear_display" id="t`7d}Bz=**3)Qg6$3ETr"></block></statement><next><block type="bluetooth_uart_write" id="|%.{mb+m+0Np0{1_}xlw"><comment pinned="false" h="80" w="160">Envía los datos del acelerómetro por Bluetooth
Usamos el servicio de dispositivo (Device Information Service)
Para simplificar, enviaremos los valores como strings o números en un servicio personalizado
Para este ejemplo, simularemos un servicio personalizado, ya que el servicio de dispositivo
no está diseñado para datos de acelerómetro dinámicos.
Para una implementación más robusta, deberías definir un servicio Bluetooth personalizado.
Sin embargo, para una demostración sencilla, podemos usar la consola serie o un truco.
**Importante:** La implementación de Bluetooth en Micro:bit MakeCode es simplificada.
Para enviar datos del acelerómetro, lo más común es usar el servicio de UART.</comment><value name="data"><block type="text_join" id="Smg^/IQ!3`J^1*nNB)U]"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="MO9Xvdyz0@9}?Q6on{RM"><field name="TEXT"></field></shadow><block type="variables_get" id="+APq?QCF4|e6u2X5FfiU"><field name="VAR" id="mUNlv!YGqdVmp-KSipfL">accelerationX</field></block></value><value name="ADD1"><shadow type="text" id="gOSHJhi;6oF3kr*(IvWP"><field name="TEXT">.</field></shadow></value><value name="ADD2"><shadow type="text" id="i5D=hWSRY+!ByFLA3KaC"><field name="TEXT"></field></shadow><block type="variables_get" id="9:}R%flK%tb9;_|rsg}1"><field name="VAR" id="%khZWY;pyw]{EV#2gK1S">accelerationY</field></block></value></block></value><next><block type="device_pause" id="WaIHpF5{TK,xi},4jXE|"><comment pinned="false" h="80" w="160">Envía cada 100ms</comment><value name="pause"><shadow type="timePicker" id="AY!ur;wg(BW!+ODS@e$1"><field name="ms">1000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>